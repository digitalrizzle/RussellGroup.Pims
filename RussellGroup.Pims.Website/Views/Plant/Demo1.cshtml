@model RussellGroup.Pims.Website.Models.DemoPlant

@{
    ViewBag.Title = "Demo";
}

<h2>Demo</h2>

<div class="row">
    <div class="col-sm-offset-1 col-sm-6">
        <label>Filter by category</label>
        <input id="searchCategory" name="searchCategory" type="text" />
    </div>
</div>

<br />

<div class="row">
    <div class="col-sm-offset-1 col-sm-4">
        <div class="text-center">List 1</div>
        <ol id="excluded" class="sortable-list">
            @foreach (var plant in Model.ExcludedItems)
            {
                <li id="@(plant.Category.Name + "-"+plant.Id)" class="sortable-item">@plant.Description</li>
            }
        </ol>
    </div>
    <div class="col-sm-2 col-md-1">
    </div>
    <div class="col-sm-4">
        <div class="text-center">List 2</div>
        <ol id="included" class="sortable-list">
            @foreach (var plant in Model.IncludedItems)
            {
                <li id="@(plant.Category.Name + "-" + plant.Id)" class="sortable-item">@plant.Description</li>
            }

        </ol>
    </div>
</div>

<hr />

@section scripts {
    @Scripts.Render("~/bundles/multisortable")
    <script>
        $(document).ready(function () {
            $('.sortable-list').multisortable();
            $('#excluded').sortable('option', 'connectWith', '#included');
            $('#included').sortable('option', 'connectWith', '#excluded');
        });

        $('#searchCategory').keyup(function () {
            var $left = $('#excluded li');
            var re = new RegExp($(this).val(), "i"); // "i" means it's case-insensitive
            $left.show().filter(function () {
                return !re.test($(this).text());    //attr('id')); //if search by id
            }).addClass('hidden'); //.hide();

            $left.show().filter(function () {
                return re.test($(this).text());
            }).removeClass('hidden'); //.hide();
        });

    </script>

}
